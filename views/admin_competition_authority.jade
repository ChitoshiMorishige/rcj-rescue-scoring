//- -*- tab-width: 2 -*-
extends includes/layout

block vars
  - var ngAppDef = 'AdminAuth'

append scripts
  script.
    var competitionId = "#{competition_id}"
  script(src='/javascripts/admin_competition_authority.js')

block location
    a.breadcrumb-item(ng-click="go('/home')") Home
    a.breadcrumb-item(ng-click="go('/admin')") Admin
    a.breadcrumb-item(ng-click="go('/admin/'+competitionId)") {{competition.name}}
    span.breadcrumb-item.active Authority


block content
  .row
    .col-md-1
    .col-md-10
      h1 {{"admin.authority.title" | translate}}
      p {{"admin.authority.description" | translate}}
      br
      br
      table.custom
        thead
            tr
              th {{"admin.authority.name" | translate}}
              th {{"admin.authority.nowLevel" | translate}}
              th
              th
              th
              th
        tbody
            tr(ng-repeat='user in users')
              td(ng-bind='user.username')
              td
                span(ng-if="user.nowAuth <= 0") {{"admin.authority.level0" | translate}}
                span(ng-if="user.nowAuth == 1") {{"admin.authority.level1" | translate}}
                span(ng-if="user.nowAuth == 5") {{"admin.authority.level5" | translate}}
                span(ng-if="user.nowAuth >= 10") {{"admin.authority.level10" | translate}}
              td
                button(ng-click='updateAuthority(user._id , 0)' style="width:100%;" type="button" class="btn btn-secondary") {{"admin.authority.doLevel0" | translate}}
              td
                button(ng-click='updateAuthority(user._id , 1)' style="width:100%;" type="button" class="btn btn-info") {{"admin.authority.doLevel1" | translate}}
              td
                button(ng-click='updateAuthority(user._id , 5)' style="width:100%;" type="button" class="btn btn-primary") {{"admin.authority.doLevel5" | translate}}
              td
                button(ng-click='updateAuthority(user._id , 10)' style="width:100%;" type="button" class="btn btn-success") {{"admin.authority.doLevel10" | translate}}