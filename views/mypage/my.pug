//- -*- tab-width: 2 -*-
extends ../includes/layout

block vars
  - var ngAppDef = 'MyPage'

append scripts
  script.
    var competitionId = "#{competition}"
    var leagueId = "#{league}"
    var teamId = "#{team}"
    var token = "#{token}"
  script(src='/components/angular-toastr/dist/angular-toastr.tpls.min.js')
  script(src='/javascripts/mypage/my.js')

append css
  link(rel='stylesheet', href='/components/angular-toastr/dist/angular-toastr.css')

block location
    a.breadcrumb-item(ng-click="go('/home')") Home
    span.breadcrumb-item.active Team Page


block content
  .row
    .col-md-1
    .col-md-10
      div(style="text-align:center;")
        h1 {{competition.name}}
        h5 {{leagueName}}
        h4 #{teamName}
      hr

      .row
        if documentEnable
          .col-md-4(style="margin-bottom:10px;", ng-if="competition.documents.enable")
            a.btn.btn-default.btn-lg(style="height:200px;width:100%;height:100%;background-color:#00d2d3;color:#fff;",href=`/document/${team}/${token}`, target="_blank")
              div(style="margin-top:20px;")
                i.fas.fa-book.fa-5x(aria-hidden='true', style="margin-bottom:10px;")
                p 提出フォーム
        .col-md-4(ng-repeat="resv in reservations" style="margin-bottom:10px;")
          a.btn.btn-default.btn-lg(style="height:200px;width:100%;height:100%;background-color:#ff6b6b;color:#fff;",ng-click="goResv(resv._id)", target="_blank")
            div(style="margin-top:20px;")
              i.fas.fa-calendar-day.fa-5x(aria-hidden='true', style="margin-bottom:10px;")
              p(ng-bind="resv.name")
        .col-md-4(style="margin-bottom:10px;")
          a.btn.btn-default.btn-lg(style="height:200px;width:100%;height:100%;background-color:#feca57;color:#222;",href=`/mypage/${team}/${token}/cabinet`, target="_blank")
            div(style="margin-top:20px;")
              i.fas.fa-archive.fa-5x(aria-hidden='true', style="margin-bottom:10px;")
              p キャビネット
      hr
      div(ng-show="mails.length>0")
        h5
          i.fas.fa-envelope &nbsp;
          | メッセージ
        table.custom(style="margin-bottom:20px;")
          thead
              tr
                th.fixedhead {{"mail.sent.time" | translate}}
                th.fixedhead {{"mail.sent.subject" | translate}}
          tbody
              tr(ng-repeat='mail in mails')
                td(ng-bind="time(mail.time)")
                td
                  a(ng-click="mailView(mail)", ng-bind="mail.subject", style="text-decoration: underline; color: blue;") 