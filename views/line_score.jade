//- -*- tab-width: 2 -*-
extends includes/layout

block vars
  - var ngAppDef = 'LineScore'

append scripts
  script.
    var competitionId = "#{id}"
  script(src = '/components/datatables/media/js/jquery.dataTables.min.js')
  script(src = '/components/angular-datatables/dist/angular-datatables.min.js')
  script(src="/components/socket.io-client/socket.io.js")
  script(src='/javascripts/line_score.js')

append css
  link(rel='stylesheet', href='/components/datatables/media/css/jquery.dataTables.min.css')
  style(type='text/css').
    table {
      width: 100%;
      border-collapse: collapse;
    }

    table td {
      padding: 7px;
      border: #4e95a4 1px solid;
    }

    table thead {
      background: #a8d1f3;
    }

    table tbody tr:hover {
      background: #A0A0FF;
    }

block location
    a.breadcrumb-item(onclick="location.href='/home'") Home
    a.breadcrumb-item(onclick="location.href='/line'") Line
    a.breadcrumb-item(ng-click='go("/line/"+ competitionId )') {{competition.name}}
    span.breadcrumb-item.active Score

block content
  .row
  .col-md12
    button.btn.btn-secondary(style='margin:0 10px 10px 0;', type='button', ng-click="go('/line/' + competitionId)")
      i.fa.fa-undo(aria-hidden='true')  大会に戻る
  .row
    .col-12
      .alert.alert-info(role='alert')
          | デモ競技につき，順位づけプログラムは，RCJJ2017 JPOP中津川と共通となっています．
  br
  br
  .row
    .col-lg-6
      h3 日本リーグ - 速報順位
      table(style="overflow: scroll;")
        thead
          tr
            th.text-center 順位
            th.text-center チーム名
            th.text-center 得点
            th.text-center 時間
            th.text-center 救助数
            th.text-center 停止数
        tbody
          tr(ng-repeat='run in primaryRunsTop track by $index')
            td.text-center(ng-bind='$index + 1')
            td.text-center(ng-bind='run.team.name')
            td.text-center(ng-bind='run.score')
            td.text-center(ng-if="!run.retired"){{("00"+run.time.minutes).slice(-2)}}:{{("00"+run.time.seconds).slice(-2)}}
            td.text-center(ng-if="run.retired") R
            td.text-center(ng-bind='run.rescuedVictims')
            td.text-center(ng-bind='run.LoPsNum')

    .col-lg-6
      h3 ワールドリーグ - 速報順位
      table(style="overflow: scroll;")
        thead
          tr
            th.text-center 順位
            th.text-center チーム名
            th.text-center 得点
            th.text-center 時間
            th.text-center 救助数
            th.text-center 停止数
        tbody
          tr(ng-repeat='run in secondaryRunsTop track by $index')
            td.text-center(ng-bind='$index + 1')
            td.text-center(ng-bind='run.team.name')
            td.text-center(ng-bind='run.score')
            td.text-center(ng-if="!run.retired"){{("00"+run.time.minutes).slice(-2)}}:{{("00"+run.time.seconds).slice(-2)}}
            td.text-center(ng-if="run.retired") R
            td.text-center(ng-bind='run.rescuedVictims')
            td.text-center(ng-bind='run.LoPsNum')
  .row
    hr
  .row
    .col-lg-6
      h3 日本リーグ - 全競技
      table(style="overflow: scroll;")
        thead
          tr
            th.text-center チーム名
            th.text-center ラウンド
            th.text-center フィールド
            th.text-center 得点
            th.text-center 時間
            th.text-center 救助数
            th.text-center 停止数
        tbody
          tr(ng-repeat='run in primaryRuns')
            td.text-center(ng-bind='run.team.name')
            td.text-center(ng-bind='run.round.name')
            td.text-center(ng-bind='run.field.name')
            td.text-center(ng-bind='run.score')
            td.text-center(ng-if="!run.retired"){{("00"+run.time.minutes).slice(-2)}}:{{("00"+run.time.seconds).slice(-2)}}
            td.text-center(ng-if="run.retired") R
            td.text-center(ng-bind='run.rescuedLiveVictims + run.rescuedDeadVictims')
            td.text-center(ng-bind='run.LoPsNum')

    .col-lg-6
      h3 ワールドリーグ - 全競技
      table(style="overflow: scroll; width:100%;")
        thead
          tr
            th.text-center チーム名
            th.text-center ラウンド
            th.text-center フィールド
            th.text-center 得点
            th.text-center 時間
            th.text-center 救助数
            th.text-center 停止数
        tbody
          tr(ng-repeat='run in secondaryRuns')
                td.text-center(ng-bind='run.team.name')
                td.text-center(ng-bind='run.round.name')
                td.text-center(ng-bind='run.field.name')
                td.text-center(ng-bind='run.score')
                td.text-center(ng-if="!run.retired"){{("00"+run.time.minutes).slice(-2)}}:{{("00"+run.time.seconds).slice(-2)}}
                td.text-center(ng-if="run.retired") R
                td.text-center(ng-bind='run.rescuedLiveVictims + run.rescuedDeadVictims')
                td.text-center(ng-bind='run.LoPsNum')